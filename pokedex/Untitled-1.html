<!DOCTYPE html>
<html lang="es">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Pokedex Luis | Tu enciclopedia Pok√©mon</title>
 <script src="https://cdn.tailwindcss.com"></script>
 <script>
 tailwind.config = {
 theme: {
 extend: {
 colors: {
 pokemon: {
 50: '#fef7ff',
 100: '#feeeff',
 200: '#fddeff',
 300: '#fcc4ff',
 400: '#f99aff',
 500: '#f26fff',
 600: '#e647ff',
 700: '#cc2fff',
 800: '#a825cc',
 900: '#8a20a5'
 }
 }
 }
 }
 }
 </script>
 <style>
 @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap');

 .font-orbitron { font-family: 'Orbitron', monospace; }
 .font-inter { font-family: 'Inter', sans-serif; }

 /* Transiciones globales para modo oscuro */
 * {
 transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
 }

 .pokemon-card {
 background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
 box-shadow: 0 4px 20px rgba(0,0,0,0.08);
 transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
 }

 .pokemon-card:hover {
 transform: translateY(-8px);
 box-shadow: 0 20px 40px rgba(0,0,0,0.12);
 }

 .pokemon-card.legendary {
 background: linear-gradient(145deg, #fff7ed 0%, #fed7aa 100%);
 border: 2px solid #f97316;
 position: relative;
 }

 .pokemon-card.legendary::before {
 content: 'üëë';
 position: absolute;
 top: 8px;
 right: 8px;
 font-size: 20px;
 z-index: 10;
 }

 .pokemon-card.legendary:hover {
 box-shadow: 0 20px 40px rgba(249, 115, 22, 0.3);
 }

 /* Modo Oscuro - Pokemon Cards */
 .dark .pokemon-card {
 background: linear-gradient(145deg, #374151 0%, #1f2937 100%);
 box-shadow: 0 4px 20px rgba(0,0,0,0.3);
 border: 1px solid #4b5563;
 }

 .dark .pokemon-card:hover {
 box-shadow: 0 20px 40px rgba(0,0,0,0.4);
 }

 .dark .pokemon-card.legendary {
 background: linear-gradient(145deg, #92400e 0%, #b45309 100%);
 border: 2px solid #f59e0b;
 }

 .dark .pokemon-card.legendary:hover {
 box-shadow: 0 20px 40px rgba(245, 158, 11, 0.3);
 }

 .type-badge {
 transition: all 0.2s ease;
 }

 .type-badge:hover {
 transform: scale(1.05);
 }

 .legendary-badge {
 background: linear-gradient(45deg, #f59e0b, #f97316);
 color: white;
 animation: shimmer 2s infinite;
 }

 @keyframes shimmer {
 0%, 100% { opacity: 1; }
 50% { opacity: 0.8; }
 }

 .gradient-bg {
 background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
 }

 /* Modo Oscuro - Backgrounds */
 .dark {
 background-color: #111827 !important;
 color: #f9fafb;
 }

 .dark .bg-white {
 background-color: #1f2937 !important;
 }

 .dark .bg-gray-50 {
 background-color: #111827 !important;
 }

 .dark .bg-gray-100 {
 background-color: #374151 !important;
 }

 .dark .bg-gray-800 {
 background-color: #000000 !important;
 }

 /* Modo Oscuro - Textos */
 .dark .text-gray-700 {
 color: #d1d5db !important;
 }

 .dark .text-gray-600 {
 color: #9ca3af !important;
 }

 .dark .text-gray-800 {
 color: #f3f4f6 !important;
 }

 .dark .text-gray-500 {
 color: #6b7280 !important;
 }

 .dark .text-gray-400 {
 color: #9ca3af !important;
 }

 /* Modo Oscuro - Bordes */
 .dark .border-gray-200 {
 border-color: #4b5563 !important;
 }

 .dark .border-gray-300 {
 border-color: #6b7280 !important;
 }

 /* Modo Oscuro - Inputs y Selects */
 .dark input,
 .dark select {
 background-color: #374151 !important;
 border-color: #6b7280 !important;
 color: #f9fafb !important;
 }

 .dark input:focus,
 .dark select:focus {
 border-color: #a855f7 !important;
 box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1) !important;
 }

 .dark input::placeholder {
 color: #9ca3af !important;
 }

 /* Modo Oscuro - Botones */
 .dark button:not(.legendary-badge):not([style*="background"]) {
 background-color: #374151 !important;
 color: #f9fafb !important;
 border-color: #6b7280 !important;
 }

 .dark button:hover:not(.legendary-badge):not([style*="background"]) {
 background-color: #4b5563 !important;
 }

 /* Modo Oscuro - Estados especiales */
 .dark .aspect-square {
 background: linear-gradient(135deg, #374151 0%, #1f2937 100%) !important;
 }

 /* Modo Oscuro - Modal */
 .dark .modal-content {
 background-color: #1f2937 !important;
 }

 .loading-spinner {
 border: 3px solid #f3f4f6;
 border-top: 3px solid #667eea;
 border-radius: 50%;
 width: 40px;
 height: 40px;
 animation: spin 1s linear infinite;
 }

 .dark .loading-spinner {
 border: 3px solid #374151;
 border-top: 3px solid #a855f7;
 }

 @keyframes spin {
 0% { transform: rotate(0deg); }
 100% { transform: rotate(360deg); }
 }

 .fade-in {
 animation: fadeIn 0.5s ease-in;
 }

 @keyframes fadeIn {
 from { opacity: 0; transform: translateY(20px); }
 to { opacity: 1; transform: translateY(0); }
 }

 .skeleton {
 background: linear-gradient(90deg, #f0f0f0 25%, transparent 37%, #f0f0f0 63%);
 background-size: 400% 100%;
 animation: skeleton-loading 1.5s ease-in-out infinite;
 }

 .dark .skeleton {
 background: linear-gradient(90deg, #374151 25%, transparent 37%, #374151 63%);
 background-size: 400% 100%;
 }

 @keyframes skeleton-loading {
 0% { background-position: 100% 50%; }
 100% { background-position: 0% 50%; }
 }

 .stat-bar {
 height: 8px;
 background: linear-gradient(90deg, #ef4444, #f97316, #eab308, #22c55e);
 border-radius: 4px;
 transition: width 0.3s ease;
 }

 /* Icono de modo oscuro */
 .dark-mode-icon {
 transition: transform 0.3s ease;
 }

 .dark .dark-mode-icon {
 transform: rotate(180deg);
 }

 /* Indicador de modo oscuro activo */
 .dark .gradient-bg {
 background: linear-gradient(135deg, #4c1d95 0%, #1e1b4b 100%);
 }
 </style>
</head>
<body class="bg-gray-50 font-inter">
 <!-- Header -->
 <header class="gradient-bg shadow-lg sticky top-0 z-50">
 <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
 <div class="flex justify-between items-center h-16">
 <div class="flex items-center space-x-3">
 <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center">
 <span class="text-2xl">‚ö°</span>
 </div>
 <div>
 <h1 class="text-white text-xl font-orbitron font-bold">Pokedex Luis</h1>
 <p class="text-purple-100 text-xs">Tu enciclopedia Pok√©mon</p>
 </div>
 </div>
 <div class="flex items-center space-x-4">
 <button id="darkModeToggle" class="text-white hover:text-purple-200 transition-colors p-2 rounded-lg hover:bg-white hover:bg-opacity-10">
 <svg class="w-6 h-6 dark-mode-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 <path class="sun-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
 <path class="moon-icon hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
 </svg>
 </button>
 <div id="stats" class="text-white text-sm font-medium">
 <span id="totalPokemon">0</span> Pok√©mon
 </div>
 </div>
 </div>
 </div>
 </header>

 <!-- Layout -->
 <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
 <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
 <!-- Sidebar -->
 <aside class="lg:col-span-1">
 <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-24">
 <!-- B√∫squeda -->
 <div class="mb-6">
 <label class="block text-sm font-semibold text-gray-700 mb-2">Buscar Pok√©mon</label>
 <div class="relative">
 <input
 type="text"
 id="searchInput"
 placeholder="Nombre o ID..."
 class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pokemon-500 focus:border-transparent outline-none transition-all"
 >
 <svg class="absolute left-3 top-2.5 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
 </svg>
 </div>
 </div>

 <!-- Filtros por Generaci√≥n -->
 <div class="mb-6">
 <label class="block text-sm font-semibold text-gray-700 mb-2">Generaci√≥n</label>
 <select id="generationFilter" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pokemon-500 focus:border-transparent outline-none">
 <option value="">Todas las generaciones</option>
 <option value="1">Gen I - Kanto (1-151)</option>
 <option value="2">Gen II - Johto (152-251)</option>
 <option value="3">Gen III - Hoenn (252-386)</option>
 <option value="4">Gen IV - Sinnoh (387-493)</option>
 <option value="5">Gen V - Unova (494-649)</option>
 <option value="6">Gen VI - Kalos (650-721)</option>
 <option value="7">Gen VII - Alola (722-809)</option>
 </select>
 </div>

 <!-- Filtro por Clase -->
 <div class="mb-6">
 <label class="block text-sm font-semibold text-gray-700 mb-2">Clase</label>
 <select id="classFilter" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pokemon-500 focus:border-transparent outline-none">
 <option value="">Todas las clases</option>
 <option value="normal">Normal</option>
 <option value="legendary">Legendario</option>
 </select>
 </div>

 <!-- Ordenamiento -->
 <div class="mb-6">
 <label class="block text-sm font-semibold text-gray-700 mb-2">Ordenar por</label>
 <select id="sortBy" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pokemon-500 focus:border-transparent outline-none">
 <option value="id">ID (menor a mayor)</option>
 <option value="name">Nombre (A-Z)</option>
 <option value="height">Altura</option>
 <option value="weight">Peso</option>
 </select>
 </div>

 <!-- Filtros por Tipo -->
 <div class="mb-6">
 <label class="block text-sm font-semibold text-gray-700 mb-2">Filtrar por tipo</label>
 <div id="typeFilters" class="grid grid-cols-2 gap-2">
 <!-- Los botones de tipos se generar√°n din√°micamente -->
 </div>
 </div>

 <!-- Filtros por Clasificaci√≥n -->
 <div class="mb-6">
 <label class="block text-sm font-semibold text-gray-700 mb-2">Filtrar por clasificaci√≥n</label>
 <div id="classFilters" class="grid grid-cols-1 gap-2">
 <!-- Los botones de clasificaci√≥n se generar√°n din√°micamente -->
 </div>
 </div>

 <!-- Estad√≠sticas -->
 <div class="mb-6">
 <h3 class="text-sm font-semibold text-gray-700 mb-2">Estad√≠sticas</h3>
 <div class="space-y-2 text-sm">
 <div class="flex justify-between">
 <span>Mostrando:</span>
 <span id="showingCount" class="font-medium">0</span>
 </div>
 <div class="flex justify-between">
 <span>Total:</span>
 <span id="totalCount" class="font-medium">0</span>
 </div>
 <div class="flex justify-between">
 <span>Legendarios:</span>
 <span id="legendaryCount" class="font-medium text-orange-600">0</span>
 </div>
 </div>
 </div>

 <!-- Limpiar Filtros -->
 <button id="clearFilters" class="w-full bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg font-medium transition-colors">
 Limpiar filtros
 </button>
 </div>
 </aside>

 <!-- Main Content -->
 <main class="lg:col-span-3">
 <!-- Loading State -->
 <div id="loadingState" class="flex flex-col items-center justify-center py-20">
 <div class="loading-spinner mb-4"></div>
 <p class="text-gray-600">Cargando Pok√©mon...</p>
 </div>

 <!-- Empty State -->
 <div id="emptyState" class="hidden flex flex-col items-center justify-center py-20">
 <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4">
 <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
 </svg>
 </div>
 <h3 class="text-xl font-semibold text-gray-800 mb-2">No se encontraron Pok√©mon</h3>
 <p class="text-gray-600">Intenta cambiar los filtros o el t√©rmino de b√∫squeda</p>
 </div>

 <!-- Pok√©mon Grid -->
 <div id="pokemonGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
 <!-- Las tarjetas se generar√°n din√°micamente -->
 </div>

 <!-- Paginaci√≥n -->
 <div id="pagination" class="hidden mt-8 flex justify-center">
 <div class="flex space-x-2">
 <button id="prevPage" class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
 Anterior
 </button>
 <div id="pageNumbers" class="flex space-x-2">
 <!-- Los n√∫meros de p√°gina se generar√°n din√°micamente -->
 </div>
 <button id="nextPage" class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
 Siguiente
 </button>
 </div>
 </div>
 </main>
 </div>
 </div>

 <!-- Modal de Detalles -->
 <div id="pokemonModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
 <div class="bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto modal-content">
 <div id="modalContent">
 <!-- El contenido del modal se generar√° din√°micamente -->
 </div>
 </div>
 </div>

 <!-- Footer -->
 <footer class="bg-gray-800 text-white mt-16">
 <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
 <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
 <div>
 <h3 class="text-lg font-semibold mb-4">Pokedex Luis</h3>
 <p class="text-gray-300">Tu enciclopedia Pok√©mon definitiva con informaci√≥n completa de todas las generaciones y clasificaci√≥n de legendarios.</p>
 </div>
 <div>
 <h3 class="text-lg font-semibold mb-4">Caracter√≠sticas</h3>
 <ul class="space-y-2 text-gray-300">
 <li>‚Ä¢ B√∫squeda avanzada</li>
 <li>‚Ä¢ Filtros por tipo, generaci√≥n y clase</li>
 <li>‚Ä¢ Clasificaci√≥n de Pok√©mon legendarios</li>
 <li>‚Ä¢ Informaci√≥n detallada</li>
 <li>‚Ä¢ Dise√±o responsive</li>
 </ul>
 </div>
 <div>
 <h3 class="text-lg font-semibold mb-4">Datos</h3>
 <p class="text-gray-300">Informaci√≥n obtenida de la Pok√©API oficial. Todos los derechos de Pok√©mon pertenecen a Nintendo, Game Freak y Creatures Inc.</p>
 </div>
 </div>
 <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-300">
 <p>&copy; 2025 Pokedex Luis. Creado con ‚ù§Ô∏è para entrenadores Pok√©mon.</p>
 </div>
 </div>
 </footer>

 <script>
 // Estado global de la aplicaci√≥n
 const appState = {
 allPokemon: [],
 filteredPokemon: [],
 currentPage: 1,
 pokemonPerPage: 12,
 activeFilters: {
 search: '',
 types: [],
 generation: '',
 class: '',
 sortBy: 'id'
 },
 isLoading: false,
 darkMode: false
 };

 // Lista de Pok√©mon legendarios por ID
 const legendaryPokemon = [
 144, 145, 146, // Articuno, Zapdos, Moltres
 150, 151, // Mewtwo, Mew
 243, 244, 245, // Raikou, Entei, Suicune
 249, 250, 251, // Lugia, Ho-oh, Celebi
 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, // Hoenn legendarios
 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, // Sinnoh legendarios
 494, 638, 639, 640, 641, 642, 643, 644, 645, 646, 647, 648, 649, // Unova legendarios
 716, 717, 718, 719, 720, 721, // Kalos legendarios
 785, 786, 787, 788, 789, 790, 791, 792, 800, 801, 802, 807, 808, 809 // Alola legendarios
 ];

 // Configuraci√≥n de tipos de Pok√©mon con colores
 const pokemonTypes = {
 normal: { color: '#A8A878', name: 'Normal' },
 fire: { color: '#F08030', name: 'Fuego' },
 water: { color: '#6890F0', name: 'Agua' },
 electric: { color: '#F8D030', name: 'El√©ctrico' },
 grass: { color: '#78C850', name: 'Planta' },
 ice: { color: '#98D8D8', name: 'Hielo' },
 fighting: { color: '#C03028', name: 'Lucha' },
 poison: { color: '#A040A0', name: 'Veneno' },
 ground: { color: '#E0C068', name: 'Tierra' },
 flying: { color: '#A890F0', name: 'Volador' },
 psychic: { color: '#F85888', name: 'Ps√≠quico' },
 bug: { color: '#A8B820', name: 'Bicho' },
 rock: { color: '#B8A038', name: 'Roca' },
 ghost: { color: '#705898', name: 'Fantasma' },
 dragon: { color: '#7038F8', name: 'Drag√≥n' },
 dark: { color: '#705848', name: 'Siniestro' },
 steel: { color: '#B8B8D0', name: 'Acero' },
 fairy: { color: '#EE99AC', name: 'Hada' }
 };

 // Configuraci√≥n de generaciones
 const generations = {
 1: { start: 1, end: 151, name: 'Kanto' },
 2: { start: 152, end: 251, name: 'Johto' },
 3: { start: 252, end: 386, name: 'Hoenn' },
 4: { start: 387, end: 493, name: 'Sinnoh' },
 5: { start: 494, end: 649, name: 'Unova' },
 6: { start: 650, end: 721, name: 'Kalos' },
 7: { start: 722, end: 809, name: 'Alola' }
 };

 // Funci√≥n para capitalizar texto
 function capitalize(text) {
 return text.charAt(0).toUpperCase() + text.slice(1);
 }

 // Funci√≥n para obtener el color de un tipo
 function getTypeColor(type) {
 return pokemonTypes[type]?.color || '#68D391';
 }

 // Funci√≥n para obtener el nombre en espa√±ol del tipo
 function getTypeName(type) {
 return pokemonTypes[type]?.name || capitalize(type);
 }

 // Funci√≥n para verificar si un Pok√©mon es legendario
 function isLegendary(pokemonId) {
 return legendaryPokemon.includes(pokemonId);
 }

 // Funci√≥n para alternar modo oscuro
 function toggleDarkMode() {
 appState.darkMode = !appState.darkMode;
 
 if (appState.darkMode) {
 document.documentElement.classList.add('dark');
 localStorage.setItem('darkMode', 'true');
 } else {
 document.documentElement.classList.remove('dark');
 localStorage.setItem('darkMode', 'false');
 }
 
 updateDarkModeIcon();
 }

 // Funci√≥n para actualizar el icono del modo oscuro
 function updateDarkModeIcon() {
 const sunIcon = document.querySelector('.sun-icon');
 const moonIcon = document.querySelector('.moon-icon');
 
 if (appState.darkMode) {
 sunIcon.classList.add('hidden');
 moonIcon.classList.remove('hidden');
 } else {
 sunIcon.classList.remove('hidden');
 moonIcon.classList.add('hidden');
 }
 }

 // Funci√≥n para inicializar el modo oscuro
 function initializeDarkMode() {
 const savedDarkMode = localStorage.getItem('darkMode');
 const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
 
 appState.darkMode = savedDarkMode === 'true' || (savedDarkMode === null && prefersDark);
 
 if (appState.darkMode) {
 document.documentElement.classList.add('dark');
 }
 
 updateDarkModeIcon();
 }

 // Funci√≥n para mostrar/ocultar estados de carga
 function toggleLoadingState(show) {
 const loadingState = document.getElementById('loadingState');
 const pokemonGrid = document.getElementById('pokemonGrid');
 const emptyState = document.getElementById('emptyState');

 if (show) {
 loadingState.classList.remove('hidden');
 pokemonGrid.classList.add('hidden');
 emptyState.classList.add('hidden');
 } else {
 loadingState.classList.add('hidden');
 pokemonGrid.classList.remove('hidden');
 }
 }

 // Funci√≥n para mostrar estado vac√≠o
 function showEmptyState() {
 const loadingState = document.getElementById('loadingState');
 const pokemonGrid = document.getElementById('pokemonGrid');
 const emptyState = document.getElementById('emptyState');

 loadingState.classList.add('hidden');
 pokemonGrid.classList.add('hidden');
 emptyState.classList.remove('hidden');
 }

 // Funci√≥n para cargar todos los Pok√©mon
 async function loadAllPokemon() {
 try {
 toggleLoadingState(true);

 // Cargar lista inicial de Pok√©mon
 const response = await fetch('https://pokeapi.co/api/v2/pokemon?limit=809');
 const data = await response.json();

 // Cargar detalles de cada Pok√©mon
 const pokemonPromises = data.results.map(async (pokemon, index) => {
 try {
 const pokemonResponse = await fetch(pokemon.url);
 const pokemonData = await pokemonResponse.json();
 return {
 id: pokemonData.id,
 name: pokemonData.name,
 image: pokemonData.sprites.other['official-artwork'].front_default || pokemonData.sprites.front_default,
 types: pokemonData.types.map(type => type.type.name),
 height: pokemonData.height,
 weight: pokemonData.weight,
 stats: pokemonData.stats.map(stat => ({
 name: stat.stat.name,
 base_stat: stat.base_stat
 })),
 abilities: pokemonData.abilities.map(ability => ability.ability.name),
 isLegendary: isLegendary(pokemonData.id)
 };
 } catch (error) {
 console.error(`Error loading pokemon ${pokemon.name}:`, error);
 return null;
 }
 });

 // Procesar en lotes para mejor performance
 const batchSize = 50;
 const allPokemon = [];

 for (let i = 0; i < pokemonPromises.length; i += batchSize) {
 const batch = pokemonPromises.slice(i, i + batchSize);
 const batchResults = await Promise.all(batch);
 allPokemon.push(...batchResults.filter(pokemon => pokemon !== null));

 // Actualizar progreso
 const progress = Math.min(allPokemon.length, 809);
 document.getElementById('totalPokemon').textContent = progress;
 }

 appState.allPokemon = allPokemon.sort((a, b) => a.id - b.id);
 appState.filteredPokemon = [...appState.allPokemon];

 updateStats();
 renderPokemon();
 toggleLoadingState(false);

 } catch (error) {
 console.error('Error loading Pokemon:', error);
 toggleLoadingState(false);
 showEmptyState();
 }
 }

 // Funci√≥n para crear filtros de tipos
 function createTypeFilters() {
 const typeFiltersContainer = document.getElementById('typeFilters');

 Object.entries(pokemonTypes).forEach(([type, config]) => {
 const button = document.createElement('button');
 button.className = 'px-3 py-1 rounded-full text-white text-xs font-medium transition-all hover:scale-105';
 button.style.backgroundColor = config.color;
 button.textContent = config.name;
 button.dataset.type = type;

 button.addEventListener('click', () => toggleTypeFilter(type, button));
 typeFiltersContainer.appendChild(button);
 });
 }

 // Funci√≥n para crear filtros de clasificaci√≥n
 function createClassFilters() {
 const classFiltersContainer = document.getElementById('classFilters');
 
 const classifications = [
 { id: 'normal', name: '‚≠ê Normal', color: '#6B7280', bgColor: '#F3F4F6' },
 { id: 'legendary', name: 'üëë Legendario', color: '#FFFFFF', bgColor: '#F97316' }
 ];

 classifications.forEach(({ id, name, color, bgColor }) => {
 const button = document.createElement('button');
 button.className = 'px-3 py-2 rounded-full text-xs font-medium transition-all hover:scale-105';
 button.style.backgroundColor = bgColor;
 button.style.color = color;
 button.textContent = name;
 button.dataset.class = id;

 button.addEventListener('click', () => toggleClassFilter(id, button));
 classFiltersContainer.appendChild(button);
 });
 }

 // Funci√≥n para alternar filtro de tipo
 function toggleTypeFilter(type, button) {
 const index = appState.activeFilters.types.indexOf(type);

 if (index === -1) {
 appState.activeFilters.types.push(type);
 button.classList.add('ring-4', 'ring-white', 'ring-opacity-50');
 } else {
 appState.activeFilters.types.splice(index, 1);
 button.classList.remove('ring-4', 'ring-white', 'ring-opacity-50');
 }

 filterPokemon();
 }

 // Funci√≥n para alternar filtro de clasificaci√≥n
 function toggleClassFilter(classType, button) {
 // Si ya est√° activo, lo desactivamos
 if (appState.activeFilters.class === classType) {
 appState.activeFilters.class = '';
 button.classList.remove('ring-4', 'ring-white', 'ring-opacity-50');
 } else {
 // Desactivar otros botones de clasificaci√≥n
 document.querySelectorAll('#classFilters button').forEach(btn => {
 btn.classList.remove('ring-4', 'ring-white', 'ring-opacity-50');
 });
 
 // Activar el nuevo filtro
 appState.activeFilters.class = classType;
 button.classList.add('ring-4', 'ring-white', 'ring-opacity-50');
 }

 filterPokemon();
 }

 // Funci√≥n para filtrar Pok√©mon
 function filterPokemon() {
 let filtered = [...appState.allPokemon];

 // Filtro por b√∫squeda
 if (appState.activeFilters.search) {
 const searchTerm = appState.activeFilters.search.toLowerCase();
 filtered = filtered.filter(pokemon =>
 pokemon.name.toLowerCase().includes(searchTerm) ||
 pokemon.id.toString().includes(searchTerm)
 );
 }

 // Filtro por tipos
 if (appState.activeFilters.types.length > 0) {
 filtered = filtered.filter(pokemon =>
 appState.activeFilters.types.some(type =>
 pokemon.types.includes(type)
 )
 );
 }

 // Filtro por generaci√≥n
 if (appState.activeFilters.generation) {
 const gen = generations[appState.activeFilters.generation];
 filtered = filtered.filter(pokemon =>
 pokemon.id >= gen.start && pokemon.id <= gen.end
 );
 }

 // Filtro por clase
 if (appState.activeFilters.class) {
 if (appState.activeFilters.class === 'legendary') {
 filtered = filtered.filter(pokemon => pokemon.isLegendary);
 } else if (appState.activeFilters.class === 'normal') {
 filtered = filtered.filter(pokemon => !pokemon.isLegendary);
 }
 }

 // Ordenamiento
 filtered.sort((a, b) => {
 switch (appState.activeFilters.sortBy) {
 case 'name':
 return a.name.localeCompare(b.name);
 case 'height':
 return b.height - a.height;
 case 'weight':
 return b.weight - a.weight;
 case 'id':
 default:
 return a.id - b.id;
 }
 });

 appState.filteredPokemon = filtered;
 appState.currentPage = 1;

 updateStats();
 renderPokemon();
 renderPagination();
 }

 // Funci√≥n para actualizar estad√≠sticas
 function updateStats() {
 const legendaryCount = appState.allPokemon.filter(p => p.isLegendary).length;
 
 document.getElementById('totalCount').textContent = appState.allPokemon.length;
 document.getElementById('showingCount').textContent = appState.filteredPokemon.length;
 document.getElementById('totalPokemon').textContent = appState.allPokemon.length;
 document.getElementById('legendaryCount').textContent = legendaryCount;
 }

 // Funci√≥n para renderizar Pok√©mon
 function renderPokemon() {
 const pokemonGrid = document.getElementById('pokemonGrid');

 if (appState.filteredPokemon.length === 0) {
 showEmptyState();
 return;
 }

 const startIndex = (appState.currentPage - 1) * appState.pokemonPerPage;
 const endIndex = startIndex + appState.pokemonPerPage;
 const pokemonToShow = appState.filteredPokemon.slice(startIndex, endIndex);

 pokemonGrid.innerHTML = pokemonToShow.map(pokemon => `
 <div class="pokemon-card ${pokemon.isLegendary ? 'legendary' : ''} rounded-xl overflow-hidden cursor-pointer fade-in" data-pokemon-id="${pokemon.id}">
 <div class="aspect-square bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4">
 <img
 src="${pokemon.image}"
 alt="${capitalize(pokemon.name)}"
 class="w-full h-full object-contain"
 loading="lazy"
 >
 </div>
 <div class="p-4">
 <div class="flex justify-between items-start mb-2">
 <h3 class="text-lg font-semibold text-gray-800">${capitalize(pokemon.name)}</h3>
 <span class="text-sm text-gray-500 font-mono">#${pokemon.id.toString().padStart(3, '0')}</span>
 </div>
 <div class="flex flex-wrap gap-2 mb-3">
 ${pokemon.types.map(type => `
 <span class="type-badge px-2 py-1 rounded-full text-white text-xs font-medium" style="background-color: ${getTypeColor(type)}">
 ${getTypeName(type)}
 </span>
 `).join('')}
 ${pokemon.isLegendary ? `
 <span class="legendary-badge px-2 py-1 rounded-full text-xs font-medium">
 üëë Legendario
 </span>
 ` : ''}
 </div>
 <div class="grid grid-cols-2 gap-4 text-sm text-gray-600">
 <div>
:</span> ${pokemon.height / 10}m
 </div>
 <div>
 <span class="font-medium">Peso:</span> ${pokemon.weight / 10}kg
 </div>
 </div>
 </div>
 </div>
 `).join('');

 // Agregar event listeners a las tarjetas
 pokemonGrid.querySelectorAll('.pokemon-card').forEach(card => {
 card.addEventListener('click', () => {
 const pokemonId = parseInt(card.dataset.pokemonId);
 showPokemonModal(pokemonId);
 });
 });

 renderPagination();
 }

 // Funci√≥n para renderizar paginaci√≥n
 function renderPagination() {
 const paginationContainer = document.getElementById('pagination');
 const totalPages = Math.ceil(appState.filteredPokemon.length / appState.pokemonPerPage);

 if (totalPages <= 1) {
 paginationContainer.classList.add('hidden');
 return;
 }

 paginationContainer.classList.remove('hidden');

 const prevButton = document.getElementById('prevPage');
 const nextButton = document.getElementById('nextPage');
 const pageNumbers = document.getElementById('pageNumbers');

 // Bot√≥n anterior
 prevButton.disabled = appState.currentPage === 1;
 prevButton.onclick = () => {
 if (appState.currentPage > 1) {
 appState.currentPage--;
 renderPokemon();
 }
 };

 // Bot√≥n siguiente
 nextButton.disabled = appState.currentPage === totalPages;
 nextButton.onclick = () => {
 if (appState.currentPage < totalPages) {
 appState.currentPage++;
 renderPokemon();
 }
 };

 // N√∫meros de p√°gina
 pageNumbers.innerHTML = '';
 const maxVisiblePages = 5;
 let startPage = Math.max(1, appState.currentPage - Math.floor(maxVisiblePages / 2));
 let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

 if (endPage - startPage + 1 < maxVisiblePages) {
 startPage = Math.max(1, endPage - maxVisiblePages + 1);
 }

 for (let i = startPage; i <= endPage; i++) {
 const button = document.createElement('button');
 button.className = `px-3 py-2 rounded-lg transition-colors ${
 i === appState.currentPage
 ? 'bg-pokemon-500 text-white'
 : 'bg-white border border-gray-300 hover:bg-gray-50'
 }`;
 button.textContent = i;
 button.onclick = () => {
 appState.currentPage = i;
 renderPokemon();
 };
 pageNumbers.appendChild(button);
 }
 }

 // Funci√≥n para mostrar modal de detalles
 function showPokemonModal(pokemonId) {
 const pokemon = appState.allPokemon.find(p => p.id === pokemonId);
 if (!pokemon) return;

 const modal = document.getElementById('pokemonModal');
 const modalContent = document.getElementById('modalContent');

 modalContent.innerHTML = `
 <div class="relative">
 <!-- Header del Modal -->
 <div class="gradient-bg text-white p-6 relative overflow-hidden ${pokemon.isLegendary ? 'bg-gradient-to-br from-orange-400 to-red-600' : ''}">
 <button id="closeModal" class="absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10">
 <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
 </svg>
 </button>

 <div class="flex items-center space-x-6">
 <div class="w-32 h-32 bg-white bg-opacity-20 rounded-full flex items-center justify-center ${pokemon.isLegendary ? 'border-4 border-yellow-300' : ''}">
 <img
 src="${pokemon.image}"
 alt="${capitalize(pokemon.name)}"
 class="w-28 h-28 object-contain"
 >
 </div>
 <div>
 <div class="flex items-center space-x-3 mb-2">
 <h2 class="text-3xl font-bold font-orbitron">${capitalize(pokemon.name)}</h2>
 ${pokemon.isLegendary ? '<span class="text-2xl">üëë</span>' : ''}
 </div>
 <p class="text-purple-100 text-lg">#${pokemon.id.toString().padStart(3, '0')}</p>
 <div class="flex flex-wrap gap-2 mt-3">
 ${pokemon.types.map(type => `
 <span class="px-3 py-1 rounded-full text-white text-sm font-medium bg-white bg-opacity-30">
 ${getTypeName(type)}
 </span>
 `).join('')}
 ${pokemon.isLegendary ? `
 <span class="legendary-badge px-3 py-1 rounded-full text-sm font-medium">
 üëë Legendario
 </span>
 ` : ''}
 </div>
 </div>
 </div>
 </div>

 <!-- Contenido del Modal -->
 <div class="p-6">
 <!-- Informaci√≥n B√°sica -->
 <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
 <div class="bg-gray-50 rounded-lg p-4 text-center">
 <div class="text-2xl font-bold text-gray-800">${pokemon.height / 10}m</div>
 <div class="text-sm text-gray-600">Altura</div>
 </div>
 <div class="bg-gray-50 rounded-lg p-4 text-center">
 <div class="text-2xl font-bold text-gray-800">${pokemon.weight / 10}kg</div>
 <div class="text-sm text-gray-600">Peso</div>
 </div>
 <div class="bg-gray-50 rounded-lg p-4 text-center ${pokemon.isLegendary ? 'bg-orange-50 border border-orange-200' : ''}">
 <div class="text-2xl font-bold ${pokemon.isLegendary ? 'text-orange-600' : 'text-gray-800'}">${pokemon.isLegendary ? 'LEGENDARIO' : 'NORMAL'}</div>
 <div class="text-sm text-gray-600">Clasificaci√≥n</div>
 </div>
 </div>

 <!-- Estad√≠sticas -->
 <div class="mb-8">
 <h3 class="text-xl font-semibold text-gray-800 mb-4">Estad√≠sticas Base</h3>
 <div class="space-y-3">
 ${pokemon.stats.map(stat => {
 const statNames = {
 'hp': 'PS',
 'attack': 'Ataque',
 'defense': 'Defensa',
 'special-attack': 'At. Esp.',
 'special-defense': 'Def. Esp.',
 'speed': 'Velocidad'
 };
 const statName = statNames[stat.name] || capitalize(stat.name);
 const percentage = (stat.base_stat / 200) * 100;

 return `
 <div class="flex items-center space-x-4">
 <div class="w-20 text-sm font-medium text-gray-700">${statName}</div>
 <div class="flex-1 bg-gray-200 rounded-full h-3 relative overflow-hidden">
 <div class="stat-bar h-full" style="width: ${percentage}%"></div>
 </div>
 <div class="w-12 text-sm font-bold text-gray-800 text-right">${stat.base_stat}</div>
 </div>
 `;
 }).join('')}
 </div>
 </div>

 <!-- Habilidades -->
 <div class="mb-6">
 <h3 class="text-xl font-semibold text-gray-800 mb-4">Habilidades</h3>
 <div class="flex flex-wrap gap-2">
 ${pokemon.abilities.map(ability => `
 <span class="px-3 py-2 bg-blue-100 text-blue-800 rounded-lg text-sm font-medium">
 ${capitalize(ability.replace('-', ' '))}
 </span>
 `).join('')}
 </div>
 </div>
 </div>
 </div>
 `;

 // Mostrar modal
 modal.classList.remove('hidden');
 document.body.style.overflow = 'hidden';

 // Event listener para cerrar modal
 document.getElementById('closeModal').addEventListener('click', closePokemonModal);
 modal.addEventListener('click', (e) => {
 if (e.target === modal) {
 closePokemonModal();
 }
 });
 }

 // Funci√≥n para cerrar modal
 function closePokemonModal() {
 const modal = document.getElementById('pokemonModal');
 modal.classList.add('hidden');
 document.body.style.overflow = 'auto';
 }

 // Funci√≥n para limpiar filtros
 function clearAllFilters() {
 appState.activeFilters = {
 search: '',
 types: [],
 generation: '',
 class: '',
 sortBy: 'id'
 };

 // Limpiar inputs
 document.getElementById('searchInput').value = '';
 document.getElementById('generationFilter').value = '';
 document.getElementById('classFilter').value = '';
 document.getElementById('sortBy').value = 'id';

 // Limpiar botones de tipos
 document.querySelectorAll('#typeFilters button').forEach(button => {
 button.classList.remove('ring-4', 'ring-white', 'ring-opacity-50');
 });

 // Limpiar botones de clasificaci√≥n
 document.querySelectorAll('#classFilters button').forEach(button => {
 button.classList.remove('ring-4', 'ring-white', 'ring-opacity-50');
 });

 // Filtrar y renderizar
 filterPokemon();
 }

 // Funci√≥n de debouncing para b√∫squeda
 function debounce(func, wait) {
 let timeout;
 return function executedFunction(...args) {
 const later = () => {
 clearTimeout(timeout);
 func(...args);
 };
 clearTimeout(timeout);
 timeout = setTimeout(later, wait);
 };
 }

 // Event Listeners
 function setupEventListeners() {
 // B√∫squeda con debouncing
 const searchInput = document.getElementById('searchInput');
 const debouncedSearch = debounce((e) => {
 appState.activeFilters.search = e.target.value;
 filterPokemon();
 }, 300);

 searchInput.addEventListener('input', debouncedSearch);

 // Filtro por generaci√≥n
 document.getElementById('generationFilter').addEventListener('change', (e) => {
 appState.activeFilters.generation = e.target.value;
 filterPokemon();
 });

 // Filtro por clase
 document.getElementById('classFilter').addEventListener('change', (e) => {
 appState.activeFilters.class = e.target.value;
 filterPokemon();
 });

 // Ordenamiento
 document.getElementById('sortBy').addEventListener('change', (e) => {
 appState.activeFilters.sortBy = e.target.value;
 filterPokemon();
 });

 // Limpiar filtros
 document.getElementById('clearFilters').addEventListener('click', clearAllFilters);

 // Toggle modo oscuro
 document.getElementById('darkModeToggle').addEventListener('click', toggleDarkMode);

 // Detectar cambios en preferencia del sistema
 window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
 if (localStorage.getItem('darkMode') === null) {
 appState.darkMode = e.matches;
 if (appState.darkMode) {
 document.documentElement.classList.add('dark');
 } else {
 document.documentElement.classList.remove('dark');
 }
 updateDarkModeIcon();
 }
 });

 // Cerrar modal con ESC
 document.addEventListener('keydown', (e) => {
 if (e.key === 'Escape') {
 closePokemonModal();
 }
 });
 }

 // Funci√≥n de inicializaci√≥n
 async function initApp() {
 console.log('üöÄ Iniciando Pokedex Luis...');

 // Inicializar modo oscuro antes que nada
 initializeDarkMode();

 // Configurar event listeners
 setupEventListeners();

 // Crear filtros de tipos
 createTypeFilters();
 
 // Crear filtros de clasificaci√≥n
 createClassFilters();

 // Cargar Pok√©mon
 await loadAllPokemon();

 console.log('‚úÖ Pokedex Luis cargada correctamente!');
 }

 // Inicializar aplicaci√≥n cuando el DOM est√© listo
 document.addEventListener('DOMContentLoaded', initApp);

 // Funci√≥n adicional para exportar datos (extensi√≥n opcional)
 function exportFilteredData() {
 const dataToExport = appState.filteredPokemon.map(pokemon => ({
 id: pokemon.id,
 name: pokemon.name,
 types: pokemon.types,
 height: pokemon.height / 10,
 weight: pokemon.weight / 10,
 isLegendary: pokemon.isLegendary,
 stats: pokemon.stats.reduce((acc, stat) => {
 acc[stat.name] = stat.base_stat;
 return acc;
 }, {})
 }));

 const dataStr = JSON.stringify(dataToExport, null, 2);
 const dataBlob = new Blob([dataStr], {type: 'application/json'});
 const url = URL.createObjectURL(dataBlob);
 const link = document.createElement('a');
 link.href = url;
 link.download = 'pokemon_filtered_data.json';
 document.body.appendChild(link);
 link.click();
 document.body.removeChild(link);
 URL.revokeObjectURL(url);
 }

 // Funci√≥n para mostrar estad√≠sticas avanzadas (extensi√≥n opcional)
 function showAdvancedStats() {
 const typeStats = {};
 appState.allPokemon.forEach(pokemon => {
 pokemon.types.forEach(type => {
 if (!typeStats[type]) typeStats[type] = 0;
 typeStats[type]++;
 });
 });

 console.log('üìä Estad√≠sticas por tipo:', typeStats);

 const genStats = {};
 Object.entries(generations).forEach(([gen, range]) => {
 genStats[`Gen ${gen}`] = appState.allPokemon.filter(p =>
 p.id >= range.start && p.id <= range.end
 ).length;
 });

 console.log('üìä Estad√≠sticas por generaci√≥n:', genStats);

 const legendaryStats = {
 'Legendarios': appState.allPokemon.filter(p => p.isLegendary).length,
 'Normales': appState.allPokemon.filter(p => !p.isLegendary).length
 };

 console.log('üìä Estad√≠sticas por clasificaci√≥n:', legendaryStats);
 }
 </script>
</body>
</html>